<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.laboratory.paper.mapper.PaperFolderMapper">
   <resultMap id="PaperFolderMapperMap" type="com.laboratory.paper.entity.PaperFolder">
      <id column="id" property="id" />
      <result column="paper_id" property="paperId" />
      <result column="folder_id" property="folderId" />
   </resultMap>

   <delete id="deleteByPaperIdFolderId">
      DELETE FROM paper_folder
      <where>
         paper_id = #{paperId} AND
         folder_id = #{folderId}
      </where>
   </delete>

   <select id="queryPaperFolder" resultType="int">
      SELECT COUNT(*) FROM paper_folder
      <where>
         paper_id = #{paperId} AND folder_id = #{folderId}
      </where>
   </select>
   
   <insert id="insertPaperFolder">
      INSERT INTO paper_folder(paper_id, folder_id) VALUES(#{paperId}, #{folderId})
   </insert>

   <delete id="batchDeleteByPaperIdFolderId">
      DELETE FROM paper_folder
      <where>
         <if test="paperIds != null and paperIds.size() > 0">
            paper_id IN
            <foreach collection="paperIds" item="paperId" open="(" close=")" separator=",">
               #{paperId}
            </foreach>
         </if>

         <if test="paperIds != null and paperIds.size() > 0">
            AND
         </if>
         folder_id = #{folderId}
      </where>
   </delete>
</mapper>